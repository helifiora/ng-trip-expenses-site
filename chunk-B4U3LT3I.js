import{D as ne,E as re,F as ae,G as se,J as le,M as me,a as J,b as E,i as K,j as h,k as Q,l as y,m as X,n as b,o as S,p as w,r as Y,v as Z,w as ee,x as te,y as ie,z as oe}from"./chunk-IDYUNARR.js";import{$a as q,Ea as p,Hc as U,Jc as g,Ob as F,Pb as z,Sc as T,Ta as P,Ua as x,Wa as H,Xa as j,Y as l,Ya as $,Za as t,_a as i,aa as c,ab as M,ba as f,cb as d,db as D,la as B,nb as N,p as A,rb as r,sb as L,tb as C,ub as G,va as m,vb as O,wb as W}from"./chunk-RLTR4EYR.js";var R=class o{#e=l(h);data=l(Q);confirm(){this.#e.close(!0)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=p({type:o,selectors:[["app-dialog-person-remove"]],decls:13,vars:1,consts:[["matDialogTitle",""],["matButton","","type","button","matDialogClose",""],["matButton","filled","type","button",3,"click"]],template:function(e,a){e&1&&(t(0,"h2",0),r(1,"Confirmar Exclus\xE3o"),i(),t(2,"mat-dialog-content")(3,"p"),r(4," Tem certeza que deseja excluir o jovem "),t(5,"strong"),r(6),i(),r(7," ? "),i()(),t(8,"mat-dialog-actions")(9,"button",1),r(10,"Cancelar"),i(),t(11,"button",2),d("click",function(){return a.confirm()}),r(12,"Remover"),i()()),e&2&&(m(6),L(a.data.item.name))},dependencies:[S,g,w,X,b],encapsulation:2})};var I=class o{#e=l(y);item=z.required();edited=F();deleted=F();async removePerson(){let n=this.#e.open(R,{data:{item:this.item()}});await A(n.afterClosed())&&this.deleted.emit()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=p({type:o,selectors:[["app-person-item"]],inputs:{item:[1,"item"]},outputs:{edited:"edited",deleted:"deleted"},decls:9,vars:1,consts:[[2,"display","flex","gap","8px"],["matIconButton","text",3,"click"]],template:function(e,a){e&1&&(t(0,"p"),r(1),i(),t(2,"div",0)(3,"button",1),d("click",function(){return a.edited.emit()}),t(4,"mat-icon"),r(5,"edit"),i()(),t(6,"button",1),d("click",function(){return a.removePerson()}),t(7,"mat-icon"),r(8,"delete"),i()()()),e&2&&(m(),C(" ",a.item().name,`
`))},dependencies:[E,U],styles:["[_nghost-%COMP%]{display:flex;align-items:center;gap:24px;justify-content:space-between;padding:4px 8px}"]})};function pe(o,n){o&1&&(t(0,"mat-error"),r(1,"Precisa ter um nome v\xE1lido"),i())}var v=class o{#e=l(h);#t=l(K);personRepo=l(T);isEditMode=!!this.#t;text=B(this.#t?.person?.name??" ");close(){this.#e.close()}async save(n){if(n.invalid)return;let e=this.#t?.person;e?await this.personRepo.updatePerson({id:e.id,name:this.text()}):await this.personRepo.addPerson({id:crypto.randomUUID(),name:this.text()}),this.#e.close()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=p({type:o,selectors:[["app-dialog-person-add"]],decls:17,vars:3,consts:[["appForm","ngForm"],["nameRef","ngModel"],["matDialogTitle",""],[3,"ngSubmit"],[2,"padding","8px 0 0 0"],["appearance","outline",2,"width","100%"],["matInput","","autocomplete","off","name","name","required","",2,"width","100%",3,"ngModelChange","ngModel"],["type","button","matButton","text",3,"click"],["type","submit","matButton","filled"]],template:function(e,a){if(e&1){let s=M();t(0,"h2",2),r(1),i(),t(2,"form",3,0),d("ngSubmit",function(){c(s);let _=N(3);return f(a.save(_))}),t(4,"mat-dialog-content")(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),r(8,"Nome"),i(),t(9,"input",6,1),W("ngModelChange",function(_){return c(s),O(a.text,_)||(a.text=_),f(_)}),i(),P(11,pe,2,0,"mat-error"),i()()(),t(12,"mat-dialog-actions")(13,"button",7),d("click",function(){return c(s),f(a.close())}),r(14,"Cancelar"),i(),t(15,"button",8),r(16,"Salvar"),i()()()}if(e&2){let s=N(10);m(),C(" ",a.isEditMode?"Editar Pessoa":"Nova Pessoa",`
`),m(8),G("ngModel",a.text),m(2),x(s.hasError("required")?11:-1)}},dependencies:[b,me,le,g,ae,S,w,re,oe,Y,Z,ee,ne,ie,te,se],encapsulation:2})};var ce=(o,n)=>n.id;function fe(o,n){o&1&&q(0,"mat-divider",5)}function ue(o,n){if(o&1){let e=M();t(0,"app-person-item",4),d("deleted",function(){let s=c(e).$implicit,u=D(2);return f(u.personRepo.removePerson(s.id))})("edited",function(){let s=c(e).$implicit,u=D(2);return f(u.openEditPersonDialog(s))}),i(),P(1,fe,1,0,"mat-divider",5)}if(o&2){let e=n.$implicit,a=n.$index,s=n.$count;$("item",e),m(),x(a!==s-1?1:-1)}}function ge(o,n){if(o&1&&(t(0,"div",2),H(1,ue,2,2,null,null,ce),i()),o&2){let e=D();m(),j(e.personRepo.data())}}function _e(o,n){o&1&&(t(0,"div",3)(1,"mat-icon"),r(2,"tab_search"),i(),r(3," Nenhuma pessoa encontrada! "),i())}var de=class o{#e=l(y);personRepo=l(T);openAddPersonDialog(){this.#e.open(v)}openEditPersonDialog(n){this.#e.open(v,{data:{person:n}})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=p({type:o,selectors:[["app-person-home"]],decls:9,vars:1,consts:[[2,"display","flex","justify-content","space-between","align-items","center","margin-top","48px"],["matButton","filled",3,"click"],[2,"margin-top","24px","display","flex","flex-direction","column","overflow","hidden"],[2,"font-size","18px","text-align","center","margin-top","48px","display","flex","justify-content","center","align-items","center","gap","16px"],[3,"deleted","edited","item"],[2,"border-top-color","var(--mat-sys-surface-container-highest)"]],template:function(e,a){e&1&&(t(0,"div",0)(1,"h1"),r(2,"Pessoas"),i(),t(3,"button",1),d("click",function(){return a.openAddPersonDialog()}),t(4,"mat-icon"),r(5,"add"),i(),r(6," Novo "),i()(),P(7,ge,3,0,"div",2)(8,_e,4,0,"div",3)),e&2&&(m(7),x(a.personRepo.data().length>0?7:8))},dependencies:[g,J,I,E],encapsulation:2})};export{de as PersonHome};
